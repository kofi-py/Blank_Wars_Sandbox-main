  name: Auto-Deploy via CPAIOS Account
  on:
    push:
      branches: [main]

  jobs:
    redeploy:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout code
          uses: actions/checkout@v4
          with:
            fetch-depth: 0

        - name: Configure Git for CPAIOS account
          run: |
            git config --global user.name "CPAIOS"
            git config --global user.email "gabegreenstein@gmail.com"
            git remote set-url origin https://${{ secrets.CPAIOS_TOKEN }}@github.com/CPAIOS/Blank_Wars_2026.git

        - name: Trigger deployment as CPAIOS
          run: |
            git commit --allow-empty -m "Auto-deploy from main branch"
            git push origin main
